<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Registration</title>
  </head>
  <body>
   <nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-dark">
  <a class="navbar-brand" href="#" >BOOK STORE AND LIBRARY!</a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="/">HOME <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">ABOUT</a>
      </li>

    </ul>
  </div>
</nav>
    <br><br>
    <div class="container">
        <div class="alert alert-primary" role="alert">
            <center>REGISTER YOURSELF HERE AND GET STARTED!</center>
</div>
        <br><br>
    <form method="post" id="form" enctype="multipart/form-data" action="/customer_login/register_success">
        {% csrf_token %}<input type="hidden" value="{{role}}" name="role">
        Full Name:  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <!--<input type="text" Placeholder="First Name" name="fname">-->
        {{form.firstName}}
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <!--<input type="text" Placeholder="Middle Name" name="mname">-->
        {{form.middleName}}
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <!--<input type="text" Placeholder="Last Name" name="lname">-->
        {{form.lastName}}
        <br><br>
        Mobile Number:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        {{form.mobileNo}}
        <!--<input type="text" name="mobno"> -->
        <br>
        <br>
        Username:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <!--<input type="text" name="custname">-->
        {{form.userName}}
        <br><br>
        Enter Password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="password" name="password" id="repass">

        <br><br>
        Re-enter Paswword:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="password" id="confpass" name="repassword">
        <br>
        <div class="err" style="color:red;"></div><br>
        Email Address :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <!--<input type="email" name="email">-->
        {{form.emailAdd}}
        <br>
        <div class="emlerr" style="color:red"></div>
        <br>
        Age:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <!--<input type="text" name="age">-->
        {{form.age}}
        <br><br>
        Temporary Address:<div class="form-group">

    <textarea class="form-control" required name='temporaryAddress' id="FormControlTextarea1" rows="3">{{tempadd}}</textarea>

        <br><br>
        Pincode: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="text" name="tPincode" required id="tpin" value="{{temppin}}">

        <br><br>
        <input type="checkbox" id="addchk">Is your Permanent address same as Temporary adress?<br><br>
        Permanent Address:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <textarea class="form-control" required name='permanentAddress' id="FormControlTextarea2" rows="3">{{permadd}}</textarea>
        <br><br>

        <br><br>
        Pincode: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="text" name="pPincode" required id="ppin" value="{{permpin}}">
        <br><br>
        </div>
        Gender: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
        <input type="radio" name="gender" value="Male" id="genm">Male    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="radio" name="gender" value="Female" id="genf">Female     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="radio" name="gender" value="Others" id="geno"> Others<br>
        <div class="err1" style="color:red;"></div>
        <br><br>
        <center> <button type="submit" class="btn btn-primary" id="register">Register</button></center><br><br>
        <div style="color:red">{{error}}</div>
    </form>
        </div>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"> </script>
    <script>
        var allowsubmit = false;
        $(function(){

         $(document).ready(function(){
            $('#emlfld').val('');
            if( $('#FormControlTextarea1').val()=="" && $('#tpin').val()=="")
            {
                $('#addchk').prop('disabled',true)
            }



            });
            $('#FormControlTextarea1').keyup(function(){
            if($(this).val()!="" && $('#tpin').val()!="")
            {
             $('#addchk').prop('disabled',false)

            }
               else
            {
             $('#addchk').prop('disabled',true)
            }

            });

                     $('#tpin').keyup(function(){
            if($(this).val()!="" && $('#FormControlTextarea1').val()!="")
            {
             $('#addchk').prop('disabled',false)
            }
            else
            {
             $('#addchk').prop('disabled',true)
            }

            });

            $('#emlfld').on('keyup',function(){
                var email = $(this).val();
                console.log(email)
                $.ajax({
                type:'POST',
                url:'/customer_login/ajax/validate_email/',
                data:{
                    'email' : email,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                dataType: 'json',
                success: function(data){
                console.log(data.is_taken)
                    if(data.is_taken){
                        $('.emlerr').text('Email is already taken')
                        $('#register').attr('disabled',true)

                    }
                    if(!data.is_taken){
                     $('.emlerr').text('')
                     $('#register').attr('disabled',false)
                    }
                    }
                });

            });

            //onkeypress
            $('#confpass,#repass').keyup(function(e){
            //get values
            var pwd= $('#repass').val();
            var confpwd=$('#confpass').val();

            if(pwd == confpwd){
                $('.err').text('');
                allowsubmit = true;

            }else{
            $('.err').text('password not matching');
            allowsubmit = false;
            }
            });


            $('#form').submit(function()
            {
                var pwd = $('#repass').val();
                var confpwd = $('#confpass').val();
                var gen1=$("input[name='gender']:checked").val();
                  $('.err1').text('');
                if(pwd==""){
                    $('.err').text('please enter password');
                    return false;
                }

                if(pwd == confpwd){
                    if (gen1)
                    {
                    $('#FormControlTextarea2,#ppin').prop('disabled',false);
                    return true;
                    }
                    else{
                    $('.err1').text('please select your gender');
                    return false;
                    }
                    }
                else{
                     $('.err').text('password not matching');
                    return false;
                    }




            });

                 $('#addchk').click(function()
                 {
                if ($(this).prop('checked')==true)
                {
                    add = $('#FormControlTextarea1').val();
                    pin=$('#tpin').val();
                    $('#FormControlTextarea2').val(add);
                    $('#ppin').val(pin);
                    $('#FormControlTextarea2,#ppin').prop('disabled',true);
              }
              else if($(this).prop('checked')==false)
              {
                    $('#FormControlTextarea2').val('');
                    $('#ppin').val('');
                    $('#FormControlTextarea2,#ppin').prop('disabled',false);
                    }
            });

     $('#cust_logout').click(function(){
localStorage.removeItem('cart','chkcart');

})

//window.onunload=function(){
//localStorage.removeItem('cart','chkcart');
//}
            });



    </script>


  </body>
</html>